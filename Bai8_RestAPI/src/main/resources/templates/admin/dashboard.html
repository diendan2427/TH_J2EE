<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="admin/layout :: head"></head>
<body>
    <nav th:replace="admin/layout :: sidebar"></nav>

    <main class="admin-content">
        <div th:replace="admin/layout :: header"></div>

        <!-- Stats Cards -->
        <div class="row g-4 mb-4">
            <div class="col-md-3">
                <div class="stat-card">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <p class="text-muted mb-1">Tổng sản phẩm</p>
                            <p class="value text-primary mb-0" th:text="${totalBooks}">0</p>
                        </div>
                        <div class="icon bg-primary bg-opacity-10 text-primary">
                            <i class="bi bi-book"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <p class="text-muted mb-1">Danh mục</p>
                            <p class="value text-success mb-0" th:text="${totalCategories}">0</p>
                        </div>
                        <div class="icon bg-success bg-opacity-10 text-success">
                            <i class="bi bi-tags"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <p class="text-muted mb-1">Đơn hàng</p>
                            <p class="value text-info mb-0" th:text="${totalOrders}">0</p>
                        </div>
                        <div class="icon bg-info bg-opacity-10 text-info">
                            <i class="bi bi-bag"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <p class="text-muted mb-1">Chờ xử lý</p>
                            <p class="value text-warning mb-0" th:text="${pendingOrders}">0</p>
                        </div>
                        <div class="icon bg-warning bg-opacity-10 text-warning">
                            <i class="bi bi-clock-history"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="row g-4 mb-4">
            <div class="col-md-4">
                <a href="/admin/books" class="text-decoration-none">
                    <div class="stat-card text-center">
                        <i class="bi bi-book fs-1 text-primary"></i>
                        <h5 class="mt-3 text-dark">Quản lý sách</h5>
                        <p class="text-muted mb-0">Thêm, sửa, xóa sách</p>
                    </div>
                </a>
            </div>
            <div class="col-md-4">
                <a href="/admin/categories" class="text-decoration-none">
                    <div class="stat-card text-center">
                        <i class="bi bi-tags fs-1 text-success"></i>
                        <h5 class="mt-3 text-dark">Quản lý danh mục</h5>
                        <p class="text-muted mb-0">Thêm, sửa, xóa danh mục</p>
                    </div>
                </a>
            </div>
            <div class="col-md-4">
                <a href="/admin/orders" class="text-decoration-none">
                    <div class="stat-card text-center">
                        <i class="bi bi-bag fs-1 text-info"></i>
                        <h5 class="mt-3 text-dark">Quản lý đơn hàng</h5>
                        <p class="text-muted mb-0">Xem và xử lý đơn hàng</p>
                    </div>
                </a>
            </div>
        </div>

        <!-- Recent Orders -->
        <div class="admin-card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <span><i class="bi bi-clock-history"></i> Đơn hàng gần đây</span>
                <a href="/admin/orders" class="btn btn-sm btn-outline-primary">Xem tất cả</a>
            </div>
            <div class="card-body p-0">
                <table class="table table-admin table-hover mb-0">
                    <thead>
                        <tr>
                            <th>Mã đơn</th>
                            <th>Khách hàng</th>
                            <th>Tổng tiền</th>
                            <th>Trạng thái</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="order : ${recentOrders}">
                            <td><code th:text="${#strings.substring(order.id, 0, 8)}">ID</code></td>
                            <td th:text="${order.customerName}">Name</td>
                            <td class="text-danger" th:text="${#numbers.formatDecimal(order.totalAmount, 0, 'COMMA', 0, 'POINT')} + ' VND'">0</td>
                            <td>
                                <span class="badge bg-warning" th:if="${order.status == 'PENDING'}">Chờ xử lý</span>
                                <span class="badge bg-info" th:if="${order.status == 'CONFIRMED'}">Đã xác nhận</span>
                                <span class="badge bg-primary" th:if="${order.status == 'SHIPPING'}">Đang giao</span>
                                <span class="badge bg-success" th:if="${order.status == 'DELIVERED'}">Đã giao</span>
                                <span class="badge bg-danger" th:if="${order.status == 'CANCELLED'}">Đã hủy</span>
                            </td>
                        </tr>
                        <tr th:if="${#lists.isEmpty(recentOrders)}">
                            <td colspan="4" class="text-center text-muted py-4">Chưa có đơn hàng nào</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <div th:replace="admin/layout :: scripts"></div>
</body>
</html>
